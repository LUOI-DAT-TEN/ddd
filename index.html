<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ph√°o Hoa</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #000; overflow: hidden; width: 100vw; height: 100vh; }
    canvas { display: block; width: 100vw; height: 100vh; }

    /* ‚îÄ‚îÄ Overlay ‚îÄ‚îÄ */
    #overlay {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(3px);
      z-index: 100;
      display: flex; align-items: center; justify-content: center;
      opacity: 0; pointer-events: none;
      transition: opacity 0.6s ease;
    }
    #overlay.show { opacity: 1; pointer-events: all; }

    /* ‚îÄ‚îÄ Popup box ‚îÄ‚îÄ */
    #popup {
      position: relative;
      background: linear-gradient(145deg, #0d001f, #1a0030, #0d001f);
      border: 1px solid rgba(255,215,0,0.35);
      border-radius: 24px;
      padding: 50px 44px 40px;
      max-width: 420px; width: 90%;
      text-align: center;
      box-shadow:
        0 0 40px rgba(255,100,0,0.25),
        0 0 80px rgba(150,0,255,0.15),
        inset 0 0 30px rgba(255,215,0,0.04);
      transform: scale(0.75) translateY(40px);
      transition: transform 0.6s cubic-bezier(0.34,1.56,0.64,1), opacity 0.5s ease;
      opacity: 0;
    }
    #overlay.show #popup { transform: scale(1) translateY(0); opacity: 1; }

    /* Corner ornaments */
    #popup::before, #popup::after {
      content: '‚ú¶';
      position: absolute;
      font-size: 18px;
      color: rgba(255,215,0,0.5);
    }
    #popup::before { top: 14px; left: 18px; }
    #popup::after  { top: 14px; right: 18px; }

    .popup-emoji {
      font-size: 62px;
      display: block;
      margin-bottom: 12px;
      animation: popBounce 1.8s ease-in-out infinite;
      filter: drop-shadow(0 0 16px rgba(255,200,0,0.7));
    }
    @keyframes popBounce {
      0%,100% { transform: translateY(0) rotate(-4deg); }
      50%      { transform: translateY(-10px) rotate(4deg); }
    }

    .popup-title {
      font-family: Georgia, serif;
      font-size: 28px;
      font-weight: 900;
      background: linear-gradient(135deg, #ffd700, #ff6b35, #ff1493, #ffd700);
      background-size: 250% 250%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradShift 3s ease infinite;
      line-height: 1.25;
      margin-bottom: 8px;
    }
    @keyframes gradShift {
      0%,100% { background-position: 0% 50%; }
      50%      { background-position: 100% 50%; }
    }

    .popup-sub {
      font-family: Georgia, serif;
      font-size: 13px;
      color: rgba(255,200,150,0.8);
      letter-spacing: 3px;
      margin-bottom: 20px;
    }

    .popup-divider {
      width: 60%; height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,215,0,0.5), transparent);
      margin: 0 auto 20px;
    }

    .popup-msg {
      font-family: Georgia, serif;
      font-size: 15px;
      color: rgba(255,220,180,0.9);
      line-height: 1.9;
      letter-spacing: 1px;
    }
    .popup-msg span {
      color: #ffd700;
      text-shadow: 0 0 8px #ffd700;
    }

    .popup-close {
      margin-top: 28px;
      display: inline-block;
      padding: 10px 36px;
      border: 1px solid rgba(255,215,0,0.5);
      border-radius: 50px;
      background: rgba(255,150,0,0.12);
      color: #ffd700;
      font-family: Georgia, serif;
      font-size: 14px;
      letter-spacing: 2px;
      cursor: pointer;
      transition: background 0.25s, box-shadow 0.25s, transform 0.15s;
    }
    .popup-close:hover {
      background: rgba(255,150,0,0.28);
      box-shadow: 0 0 18px rgba(255,200,0,0.35);
      transform: scale(1.05);
    }
    .popup-close:active { transform: scale(0.97); }

    /* X button */
    .popup-x {
      position: absolute; top: 14px; right: 50px;
      width: 28px; height: 28px;
      border-radius: 50%;
      border: 1px solid rgba(255,255,255,0.2);
      background: rgba(255,255,255,0.06);
      color: rgba(255,255,255,0.5);
      font-size: 14px; line-height: 28px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .popup-x:hover { background: rgba(255,80,80,0.3); color: #fff; }

    /* Confetti dots inside popup */
    .pop-star {
      position: absolute;
      font-size: 14px;
      pointer-events: none;
      animation: floatStar var(--d,3s) ease-in-out infinite alternate;
      opacity: 0.6;
    }
    @keyframes floatStar {
      from { transform: translateY(0) rotate(0deg); }
      to   { transform: translateY(-12px) rotate(20deg); }
    }
  </style>
</head>
<body>
<canvas id="c"></canvas>

<!-- Popup -->
<div id="overlay">
  <div id="popup">
    <div class="popup-x" id="popupX">‚úï</div>
    <div class="pop-star" style="top:20px;left:60px;--d:2.5s">üåü</div>
    <div class="pop-star" style="bottom:60px;left:24px;--d:3.2s">‚ú®</div>
    <div class="pop-star" style="bottom:70px;right:24px;--d:2.8s">üåü</div>
    <div class="pop-star" style="top:22px;right:72px;--d:3.5s">‚ú®</div>

    <span class="popup-emoji">üéÜ</span>
    <div class="popup-title">CH√öC M·ª™NG<br>NƒÇM M·ªöI!</div>
    <div class="popup-sub">‚ú¶ NƒÉm 2026 ‚ú¶</div>
    <div class="popup-divider"></div>
    <div class="popup-msg">
      <span>L√å X√å TUI ƒêI B·∫†N</span><br>
      TUI B·∫ÆT ƒê·∫¶U NH·∫¨N T·ª™ H√îM NAY<br>
      CH√öC B·∫†N NƒÇM M·ªöI TH√ÄNH C√îNG R·ª∞C R·ª†! üéâ
    </div>
    <button class="popup-close" id="popupClose">OK</button>
  </div>
</div>
<script>
const canvas = document.getElementById('c');
const ctx    = canvas.getContext('2d');

function resize() {
  canvas.width  = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener('resize', resize);

const COLORS = [
  '#ff4444','#ff7722','#ffcc00','#aaff44',
  '#44ffdd','#44aaff','#aa44ff','#ff44cc',
  '#ffffff','#ffd700','#ff6699','#00ffaa',
];

/* ‚îÄ‚îÄ H·∫°t l·ª≠a ‚îÄ‚îÄ */
class Spark {
  constructor(x, y, color) {
    this.x = x; this.y = y;
    this.color = color;
    this.r = Math.random() * 2.8 + 0.8;
    const angle = Math.random() * Math.PI * 2;
    const spd   = Math.random() * 7 + 1.5;
    this.vx = Math.cos(angle) * spd;
    this.vy = Math.sin(angle) * spd;
    this.alpha = 1;
    this.decay = Math.random() * 0.014 + 0.010;
    this.gravity = 0.13;
    this.trail = [];
  }
  update() {
    this.trail.push({ x: this.x, y: this.y });
    if (this.trail.length > 7) this.trail.shift();
    this.vx *= 0.979;
    this.x  += this.vx;
    this.y  += this.vy;
    this.vy += this.gravity;
    this.alpha -= this.decay;
  }
  draw() {
    for (let i = 0; i < this.trail.length; i++) {
      const t  = this.trail[i];
      const ta = (i / this.trail.length) * this.alpha * 0.35;
      ctx.save();
      ctx.globalAlpha = ta;
      ctx.fillStyle   = this.color;
      ctx.shadowColor = this.color;
      ctx.shadowBlur  = 5;
      ctx.beginPath();
      ctx.arc(t.x, t.y, this.r * 0.5, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();
    }
    ctx.save();
    ctx.globalAlpha = this.alpha;
    ctx.fillStyle   = this.color;
    ctx.shadowColor = this.color;
    ctx.shadowBlur  = 12;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
    ctx.fill();
    ctx.restore();
  }
}

/* ‚îÄ‚îÄ H·∫°t glitter h√¨nh sao ‚îÄ‚îÄ */
class StarParticle {
  constructor(x, y, color) {
    this.x = x; this.y = y;
    this.color = color;
    this.size = Math.random() * 5 + 2;
    const angle = Math.random() * Math.PI * 2;
    const spd   = Math.random() * 3.5 + 0.5;
    this.vx = Math.cos(angle) * spd;
    this.vy = Math.sin(angle) * spd;
    this.alpha = 1;
    this.decay = Math.random() * 0.018 + 0.007;
    this.gravity = 0.07;
    this.rot = Math.random() * Math.PI * 2;
    this.rotSpd = (Math.random() - 0.5) * 0.18;
  }
  update() {
    this.x   += this.vx;
    this.y   += this.vy;
    this.vy  += this.gravity;
    this.rot += this.rotSpd;
    this.alpha -= this.decay;
  }
  draw() {
    ctx.save();
    ctx.globalAlpha = this.alpha;
    ctx.translate(this.x, this.y);
    ctx.rotate(this.rot);
    ctx.fillStyle   = this.color;
    ctx.shadowColor = this.color;
    ctx.shadowBlur  = 10;
    ctx.beginPath();
    for (let i = 0; i < 10; i++) {
      const a = (i * Math.PI) / 5 - Math.PI / 2;
      const r = i % 2 === 0 ? this.size : this.size * 0.42;
      i === 0
        ? ctx.moveTo(Math.cos(a) * r, Math.sin(a) * r)
        : ctx.lineTo(Math.cos(a) * r, Math.sin(a) * r);
    }
    ctx.closePath();
    ctx.fill();
    ctx.restore();
  }
}

/* ‚îÄ‚îÄ V·ª• n·ªï ‚îÄ‚îÄ */
function explode(x, y) {
  const c1 = COLORS[Math.floor(Math.random() * COLORS.length)];
  const c2 = COLORS[Math.floor(Math.random() * COLORS.length)];
  const shape = Math.random();

  if (shape < 0.33) {
    // N·ªï tr√≤n ƒë·ªÅu
    const n = 80 + Math.floor(Math.random() * 60);
    for (let i = 0; i < n; i++) sparks.push(new Spark(x, y, i % 3 === 0 ? c2 : c1));

  } else if (shape < 0.66) {
    // N·ªï v√≤ng tr√≤n
    const n = 70;
    for (let i = 0; i < n; i++) {
      const angle = (i / n) * Math.PI * 2;
      const spd   = 4 + Math.random() * 3;
      const sp    = new Spark(x, y, i % 2 === 0 ? c1 : c2);
      sp.vx = Math.cos(angle) * spd;
      sp.vy = Math.sin(angle) * spd;
      sparks.push(sp);
    }

  } else {
    // N·ªï h√¨nh tia
    const arms = 6 + Math.floor(Math.random() * 4);
    const perArm = 10;
    for (let a = 0; a < arms; a++) {
      const baseAngle = (a / arms) * Math.PI * 2;
      for (let j = 0; j < perArm; j++) {
        const angle = baseAngle + (Math.random() - 0.5) * 0.22;
        const spd   = 2 + (j / perArm) * 6.5 + Math.random() * 1.5;
        const sp    = new Spark(x, y, a % 2 === 0 ? c1 : c2);
        sp.vx = Math.cos(angle) * spd;
        sp.vy = Math.sin(angle) * spd;
        sparks.push(sp);
      }
    }
  }

  // Glitter sao v√†ng
  const ns = 22 + Math.floor(Math.random() * 18);
  for (let i = 0; i < ns; i++)
    sparks.push(new StarParticle(x, y, i % 2 === 0 ? '#ffd700' : c1));

  // S√≥ng xung k√≠ch
  waves.push({ x, y, r: 0, alpha: 0.7, color: c1 });
}

/* ‚îÄ‚îÄ T√™n l·ª≠a ‚îÄ‚îÄ */
class Rocket {
  constructor(tx, ty) {
    this.x    = tx + (Math.random() - 0.5) * 60;
    this.y    = canvas.height + 10;
    this.tx   = tx; this.ty = ty;
    const spd = 13 + Math.random() * 7;
    const ang = Math.atan2(ty - this.y, tx - this.x);
    this.vx   = Math.cos(ang) * spd;
    this.vy   = Math.sin(ang) * spd;
    this.trail = [];
    this.done  = false;
  }
  update() {
    this.trail.push({ x: this.x, y: this.y });
    if (this.trail.length > 12) this.trail.shift();
    this.x += this.vx;
    this.y += this.vy;
    if (this.y <= this.ty + 15) {
      explode(this.x, this.y);
      this.done = true;
    }
  }
  draw() {
    for (let i = 0; i < this.trail.length; i++) {
      const t = this.trail[i];
      const a = (i / this.trail.length) * 0.8;
      ctx.save();
      ctx.globalAlpha = a;
      ctx.fillStyle   = '#ffdd88';
      ctx.shadowColor = '#ff8800';
      ctx.shadowBlur  = 10;
      ctx.beginPath();
      ctx.arc(t.x, t.y, 2.2, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();
    }
  }
}

const sparks  = [];
const rockets = [];
const waves   = [];

/* ‚îÄ‚îÄ Render loop ‚îÄ‚îÄ */
function loop() {
  ctx.fillStyle = 'rgba(0,0,0,0.17)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  for (let i = waves.length - 1; i >= 0; i--) {
    const w = waves[i];
    w.r    += 5;
    w.alpha -= 0.03;
    if (w.alpha <= 0) { waves.splice(i, 1); continue; }
    ctx.save();
    ctx.globalAlpha = w.alpha;
    ctx.strokeStyle = w.color;
    ctx.lineWidth   = 1.5;
    ctx.shadowColor = w.color;
    ctx.shadowBlur  = 14;
    ctx.beginPath();
    ctx.arc(w.x, w.y, w.r, 0, Math.PI * 2);
    ctx.stroke();
    ctx.restore();
  }

  for (let i = rockets.length - 1; i >= 0; i--) {
    rockets[i].update();
    rockets[i].draw();
    if (rockets[i].done) rockets.splice(i, 1);
  }

  for (let i = sparks.length - 1; i >= 0; i--) {
    sparks[i].update();
    sparks[i].draw();
    if (sparks[i].alpha <= 0) sparks.splice(i, 1);
  }

  requestAnimationFrame(loop);
}
loop();

/* ‚îÄ‚îÄ B·∫Øn t·ª± ƒë·ªông ‚îÄ‚îÄ */
function autoFire() {
  const x = canvas.width  * 0.1 + Math.random() * canvas.width  * 0.8;
  const y = canvas.height * 0.05 + Math.random() * canvas.height * 0.45;
  rockets.push(new Rocket(x, y));
  setTimeout(autoFire, Math.random() * 900 + 400);
}

for (let i = 0; i < 7; i++) {
  setTimeout(() => {
    const x = canvas.width  * 0.1 + Math.random() * canvas.width  * 0.8;
    const y = canvas.height * 0.05 + Math.random() * canvas.height * 0.45;
    rockets.push(new Rocket(x, y));
  }, i * 280);
}
setTimeout(autoFire, 2200);

/* ‚îÄ‚îÄ Click canvas ƒë·ªÉ b·∫Øn ‚îÄ‚îÄ */
canvas.addEventListener('click', e => {
  if (document.getElementById('overlay').classList.contains('show')) return;
  for (let i = 0; i < 4; i++) {
    setTimeout(() => {
      rockets.push(new Rocket(
        e.clientX + (Math.random() - 0.5) * 120,
        e.clientY + (Math.random() - 0.5) * 80
      ));
    }, i * 130);
  }
});

/* ‚îÄ‚îÄ Popup sau 10s ‚îÄ‚îÄ */
const overlay    = document.getElementById('overlay');
const popupClose = document.getElementById('popupClose');
const popupX     = document.getElementById('popupX');

function showPopup() {
  overlay.classList.add('show');
  for (let i = 0; i < 8; i++) {
    setTimeout(() => {
      const x = canvas.width  * 0.1 + Math.random() * canvas.width  * 0.8;
      const y = canvas.height * 0.05 + Math.random() * canvas.height * 0.5;
      rockets.push(new Rocket(x, y));
    }, i * 180);
  }
}

function closePopup() { overlay.classList.remove('show'); }

setTimeout(showPopup, 5000);
popupClose.addEventListener('click', closePopup);
popupX.addEventListener('click', closePopup);
overlay.addEventListener('click', e => { if (e.target === overlay) closePopup(); });
</script>
</body>
</html>
